---
title: Документ ВСД2_Производство
tags: [formatting]
keywords: search
summary: "предназначен для оформления производственной партии, как завершённой, так и незавершённой партии в системе Меркурий."
sidebar: mydoc_sidebar
permalink: doc_production.html
folder: vsd
toc: false
tags: false
---

<style>
.result {
background-color: #000000;
border: 1px solid #dedede;
padding: 10px;
margin-top: 10px;
margin-bottom: 10px;
}
</style>

{% include image.html file="screenshot_1_1548340203_screenshot_1_1545139481_2018-12-18_17-20-02.png" url="" alt="" caption="" max-width="800" %}

В документе используются сведения:

* информация о сырье, из которого партия или несколько партий были произведены;
* информация о произведенной партии или нескольких партиях продукции;
* информация о хозяйствующем субъекте - собственнике сырья и выпускаемой продукции и информация о площадке, на которой продукция выпускается;
* идентификатор производственной операции для незавершённого производства;
* номер производственной партии;
* флаг завершения производственной транзакции.

Результатом выполнения данной операции является:

* списание объема с одной или нескольких записей журнала продукции, указанного в качестве сырья;
* добавление одной или нескольких записей в журнал вырабатываемой продукции о партии продукции, которая была произведена или присоединение к существующей записи вырабатываемой продукции, если оформляется незаверёшнное производство;
* для каждой записи журнала вырабатываемой продукции, которая была добавлена при выполнении операции, система Меркурий формирует ветеринарно-сопроводительный документ (ВСД) или происходит увеличение объёма выпущенной продукции в уже оформленном ветеринарном документе (для незавершённого производства).

## Общие сведения о сценариях

### 1. Производство без исходного сырья

При производстве партии продукции сырье не используется. Такой сценарий возможен при внесении информации о "производстве" партии живых животных, молока и т.д.

### 2. Утилизация

В данном случае указывается сырье, которое было утилизировано без информации о партии продукции, которая была произведена. Данный сценарий предназначен только для тех предприятий, которые утилизируют отходы самостоятельно. Если отходы на утилизацию отправляются на другое предприятие, то оформляется транспортный сертификат.

### 3. В качестве сырья для производства продукции используется ранее выработанная на данном предприятии партия продукции.

* 3.1. Выработанная продукция с указанной записи журнала была полностью израсходована в качестве сырья, т.е. объём продукции для записи журнала после списания стал равен нулю.
* Происходит списание объёмов с указанных записей журнала.
* Запись журнала вырабатываемой продукции, объем которой израсходован, переходит в статус "оформлена".
* Оформляется один или несколько производственных сертификатов.
* Происходит гашение производственных сертификатов, объем которых был израсходован.
3.2. Выработанная продукция с указанной записи журнала НЕ была полностью израсходована, т.е. объём продукции для записи журнала после списания – больше нуля.
* Происходит списание объёмов с указанных записей журнала.
* Оформляется один или несколько производственных сертификатов.

### 4. В качестве сырья для производства продукции используется одна или несколько партий продукции из входного журнала.

4.1. Входящая продукция с указанной записи журнала была полностью израсходована в качестве сырья, т.е. объём продукции для записи журнала после списания стал равен нулю.
* Происходит списание объёмов с указанных записей журнала.
* Запись журнала входной продукции, объем которой израсходован, переходит в статус "оформлена".
* Оформляется один или несколько производственных сертификатов.

4.2. Входящая продукция с указанной записи журнала НЕ была полностью израсходована, т.е. объём продукции для записи журнала после списания – больше нуля.
* Происходит списание объёмов с указанных записей журнала.
* Оформляется один или несколько производственных сертификатов.

### 5. Незавершённое производство.

При оформлении незавершённого производства возможны как "традиционные" списание сырья и выработка продукции в рамках одного запроса, так и отдельный выпуск продукции или отдельное списание сырья. Для незавершённого производства вводится понятие "производственная транзакция" - это логическое объединение операций списания сырья и производства продукции. В запросах идентификатор транзакции указывается в поле operationId, и пока транзакция не завершена (finalize = false), в её рамках можно списывать сырьё и производить продукцию. Как было указано выше, это можно делать как в рамках одной операции, так и в отдельных. Поле finalizeOperation по умолчанию принимает значение false. Важно, чтобы в запросе, выполняемом в рамках производственной транзакции, вместе с operationId присутствовал хотя бы один из элементов:

* списание сырья;
* производство продукции;
* завершение производственной транзакции (finalize=true).

### В процессе незавершенного производства происходят следующие сценарии:

5.1. Открытие производственной транзакции. То есть происходит списание сырья в производство, сертификат имеет статус оформлен(производство не завершено)
Происходит списание объёмов с указанных записей журнала.
Оформляется один или несколько производственных сертификатов, со статусом "оформлен (производство не завершено)".
Создаётся новая запись складского журнала с выпущенной продукцией.

5.2. Добавление производственной операции в транзакцию.
Происходит списание объёмов с указанных записей журнала, если указано исходное сырье.
В ветеринарном сертификате, который был создан в результате транзакции с тем же кодом, что и текущая, происходит изменение объёма, если была указана произведённая продукция.
Происходит увеличение объёма записи произведённой продукции, которая была создана с тем же номером операции, который указан в текущей операции, если была указана произведённая продукция.

5.3. Завершение производственной транзакции.
Происходит списание объёмов с указанных записей журнала, если они были указаны.
В ветеринарном сертификате, который был создан в результате транзакции с тем же кодом, что и текущая, происходит изменение объёма, если была указана произведённая продукция.
Сертификат переходит в статус "оформлен (производство завершено)".
Происходит увеличение объёма записи произведённой продукции, которая была создана с тем же номером операции, который указан в текущей операции, если была указана произведённая продукция.
